(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function n(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}var o=function(){function t(e,r,o,i,u,c,a){var l=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"toggleClassLikeElement",(function(t){t.classList.toggle(l._cardConfig.cardLikeActiveClass)})),n(this,"_countingOtherLikes",(function(){for(var t=0;t<l._likeArray.length;){if(l._likeArray[t]._id===l._userId)return l._ownerLike=!0;t++}})),n(this,"countingQuantityLike",(function(t){l._cardCounterSelector.textContent=t})),n(this,"alertForDelete",(function(){l._handleAlertPopur(l._elementId,l._element)})),this._templateSelector=o,this._cardConfig,this._handleOpenPopup=i,this._handleAlertPopur=u,this._link=e.link,this._title=e.name,this._userId=a,this._elementId=e._id,this._likeArray=e.likes,this._likeCounter=e.likes.length,this._elementLike=c,this._strangerId=e.strangerId,this._ownerLike=!1,this._getTemplate()}var r,o;return r=t,(o=[{key:"_toggleLike",value:function(){this._btnLike.classList.toggle(this._cardConfig.cardLikeActiveClass)}},{key:"_getTemplate",value:function(){this._template=document.querySelector(this._cardConfig.cardTemplate).content.querySelector(this._cardConfig.cardSelector)}},{key:"create",value:function(){return this._card=this._getTemplate(),this._element=this._template.cloneNode(!0),this._cardImg=this._element.querySelector(this._cardConfig.cardImgSelector),this._cardTitle=this._element.querySelector(this._cardConfig.cardTitleSelector),this._btnLike=this._element.querySelector(this._cardConfig.cardLikeSelector),this._btnDelete=this._element.querySelector(this._cardConfig.cardBtnDeleteSelector),this._cardImg.src=this._data.link,this._cardTitle.textContent=this._data.name,this._cardImg.alt=this._data.name,this._cardLikeCounter=this._element.querySelector(this._cardConfig.cardCounterSelector),this._userId!==this._ownerId&&this._btnDelete.remove(),this.countingQuantityLike(this._likeCounter),this.setEventListeners(),this._element}},{key:"setEventListeners",value:function(){var t=this;this._countingOtherLikes()&&this._btnLike.classList.add(this._cardConfig.cardLikeActiveClass),this._btnLike.addEventListener("click",(function(){t._ownerLike?(t._elementLike("DELETE",t._cardId,t._btnLike),t._ownerLike=!1):(t._elementLike("PUT",t._cardId,t._btnLike),t._ownerLike=!0)})),this._btnDelete&&this._btnDelete.addEventListener("click",(function(){t._handleAlertPopur()})),this._cardImg.addEventListener("click",(function(){t._handleOpenPopup(t._title,t._link)}))}}])&&e(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}var c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.classList.remove(this._config.errorClass),e.textContent="",t.classList.remove(this._config.typeError)}},{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".".concat(t.id,"-error"));n.classList.add(this._config.errorClass),n.textContent=e,t.classList.add(this._config.typeError)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_disableButton",value:function(){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_enableButton",value:function(){this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():this._enableButton()}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)})),this._toggleButtonState()}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===a(o)?o:String(o)),r)}var o}var s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._renderedItems=items,this._container=n}var e,n;return e=t,(n=[{key:"renderItems",value:function(){var t=this;this._renderedItems.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(t){this._container.append(t)}},{key:"addNewItem",value:function(t){this._container.prepend(t)}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),f={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:".popup__submit_inactive",inputErrorClass:".popup__input-error",errorClass:".popup__input-error_visible",typeError:".popup__input_type_error"},p={cardTemplate:"#element-template",cardSelector:".element",cardImgSelector:".element__img",cardTitleSelector:".element__title",cardLikeSelector:".element__button-like",cardLikeActiveClass:"element__button-like_active",cardCounterSelector:".element__like-counter",cardBtnDeleteSelector:".element__del-btn"},y={popupEditAvatar:".popup-avatar",popupEdit:".popup-edit",popupAdd:".popup-add",popupBigImg:".popup_open_big-img",popupAlert:".popup-warning"},h=(document.querySelectorAll(".popup"),document.forms["popup-edit__form"]),d=document.forms["popup-add__form"],m=document.forms["popup-edit-avatar__form"],v=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__add-button"),b=document.querySelector(".profile__edit-btn_avatar"),g=document.querySelector(".popup__input_text_type-username"),S=document.querySelector(".popup__input_text_type-about"),w=(document.querySelector(".popup__input_text_type-title"),document.querySelector(".popup__input_text_type-title"),document.querySelector(".elements")),k=".popup__submit",E="Сохранение...";function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===O(o)?o:String(o)),r)}var o}var j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=e,this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),this._popup.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"_closePopupByOverlayClick",value:function(t){t.target.classList.contains("popup")&&this.close()}},{key:"setEventListeners",value:function(){var t=this;(evt.target.classList.contains("popup_opened")||evt.target.classList.contains("popup__button-closed"))&&this.close(),this._popup.addEventListener("mousedown",(function(e){t._closePopupByOverlayClick(e)}))}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=A(r);if(o){var n=A(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e,n=t.popupSelector,r=t.formSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n))._popup=n,e._formSubmit=r,e._form=e._popup.querySelector(".popup__form"),e._inputList=e._form.querySelectorAll(".popup__input"),e}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputValues={},this._inputList.forEach((function(e){return t._inputValues[e.name]=e.value})),this._inputValues}},{key:"setEventListeners",value:function(){var t=this;I(A(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._formSubmit(t._getInputValues()),t.close()}))}},{key:"close",value:function(){I(A(u.prototype),"close",this).call(this),this._form.reset()}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===R(o)?o:String(o)),r)}var o}var x=function(){function t(e){var n=e.name,r=e.about,o=e.avatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n,this._info=r,this_avatar=o}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,info:this._info.textContent}}},{key:"getUserId",value:function(){return this._userId}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about,r=t.avatar;this._avatar.src=r,this._avatar.alt=e,this._userId=id,this._name.textContent=e,this._info.textContent=n}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},U.apply(this,arguments)}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=F(r);if(o){var n=F(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===D(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupImg=e._popup.querySelector(".popup__img"),e._popupTitle=e._popup.querySelector(".popup__title-img"),e}return e=u,(n=[{key:"open",value:function(t,e){U(F(u.prototype),"open",this).call(this)}}])&&V(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Q(o)?o:String(o)),r)}var o}var M=function(t){return t.ok?t.json():Promise.reject(t.status)},z=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.url,this._headers=e.headers}var e,n;return e=t,(n=[{key:"installAvatar",value:function(t){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(M)}},{key:"getInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this.headers}).then(M)}},{key:"setInfo",value:function(t){var e=t.name,n=t.about;return fetch("".concat(this._url,"/users/me"),{headers:this.headers,method:"PATCH",body:JSON.stringify({name:e,about:n})}).then(M)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._Url,"/cards"),{headers:this._headers}).then(M)}},{key:"getPlaceCard",value:function(t){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then(M)}},{key:"likeCard",value:function(t,e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:t,headers:this._headers}).then((function(t){return M(t)}))}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then((function(t){return M(t)}))}}])&&H(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}function K(){return K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=X(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},K.apply(this,arguments)}function W(t,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W(t,e)}function X(t){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},X(t)}var Y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=X(r);if(o){var n=X(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._submitBtn=n._popup.querySelector(".popup__submit"),n._handleFormSubmit=e,n}return e=u,(n=[{key:"open",value:function(t,e){K(X(u.prototype),"open",this).call(this),this._cardId=t,this._cardElemment=e}},{key:"setEventListeners",value:function(){var t=this;K(X(u.prototype),"setEventListeners",this).call(this),this._submitBtn.addEventListener("click",(function(){t._handleFormSubmit(t._cardId,t._cardElemment)}))}}])&&G(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var tt=new z({url:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"bdecdc76-75a5-40e2-94d6-35ac4e7b5bcc","Content-Type":"application/json"}}),et=new J(y.popupBigImg),nt=new x({profileAvatarSelector:".profile__avatar",profileTitleSelector:".profile__title",profileSubtitleSelector:".profile__subtitle"});Promise.all([tt.getInfo(),tt.getInitialCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,c=[],a=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);a=!0);}catch(t){l=!0,o=t}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return nt.setUserInfo(o),i})).then((function(t){it.renderCards(t)})).catch((function(t){return console.log(t)}));var rt=new Y(y.confirmPopup,(function(t,e){tt.deleteCard(t).then((function(){e.remove()})).then((function(){rt.close()})).catch((function(t){console.log(t)}))})),ot=function(t,e){var n=new o(t,p,e,ft,(function(t,e,r){tt.likeCard(t,e,r).then((function(t){n.countingQuantityLike(t.likes.length),n.toggleClassLikeElement(r),n.handleOpenPopup(popupBigImg)})).catch((function(t){return console.log(t)}))}),nt.getUserId()),r=n.create();return it.addItem(r),r};et.setEventListeners();var it=new s((function(t){it.addNewItem(ot(t,(function(){st(t)})))}),w);function ut(t,e){t.textContent=e}it.renderItems();var ct=new B(y.popupE,(function(t,e){var n=e.textContent;ut(e,E),tt.setInfo(t).then((function(t){nt.setUserInfo(t)})).then((function(){return at.close()})).catch((function(t){console.log(t)})).finally((function(){ut(e,n)}))}),k),at=new B(y.popupAdd,(function(t,e){var n=e.textContent;ut(e,E),tt.getPlaceCard(t).then((function(t){it.addItem(ot(t,(function(){st(t)})))})).then((function(){at.close()})).catch((function(t){console.log(t)})).finally((function(){ut(e,n)}))}),k),lt=new B(y.popupEditAvatar,(function(t,e){var n=e.textContent;ut(e,E),tt.installAvatar(t.link).then((function(t){nt.setUserInfo(t)})).then((function(){lt.close()})).catch((function(t){console.log(t)})).finally((function(){ut(e,n)}))}),k),st=function(t){et.open(t.title,t.link)},ft=function(t,e){rt.open(t,e)};b.addEventListener("click",(function(){lt.open()})),v.addEventListener("click",(function(t){t.preventDefault();var e=nt.getUserInfo(),n=e.name,r=e.info;g.value=n,S.value=r,pt.resetValidation(),ct.open()})),_.addEventListener("click",(function(){at.open()})),ct.setEventListeners(),at.setEventListeners(),rt.setEventListeners(),lt.setEventListeners(),new yt(f,m).enableValidation();var pt=new c(f,d);pt.enableValidation();var yt=new c(f,h);yt.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMxQzdGLEdBQWdCK0gsTUFDbEIsSUFFQWxDLEVBQUFBLGlCQUFvQyxTQUFTLFNBQUN0RSxHQUM1Q0EsRUFBSXFCLGlCQUVKLElBQUFvRixFQUF1QmxDLEdBQVNtQyxjQUF4QnhOLEVBQUl1TixFQUFKdk4sS0FBTTRJLEVBQUkyRSxFQUFKM0UsS0FDZHdDLEVBQUFBLE1BQXNCcEwsRUFDdEJvTCxFQUFBQSxNQUF1QnhDLEVBQ3ZCNkUsR0FBbUJDLGtCQUNuQlgsR0FBU08sTUFDWCxJQUVBbEMsRUFBQUEsaUJBQWdDLFNBQVMsV0FDdkMzRixHQUFTNkgsTUFDWCxJQUlBUCxHQUFTOUssb0JBQ1R3RCxHQUFTeEQsb0JBQ1QwRCxHQUFXMUQsb0JBQ1hzRCxHQUFnQnRELG9CQUlhLElBQUkwTCxHQUMvQnhJLEVBQ0FpRyxHQUVtQndDLG1CQUVyQixJQUFNSCxHQUFxQixJQUFJbEwsRUFDN0I0QyxFQUNBaUcsR0FFRnFDLEdBQW1CRyxtQkFFbkIsSUFBTUQsR0FBb0IsSUFBSXBMLEVBQzVCNEMsRUFDQWlHLEdBRUZ1QyxHQUFrQkMsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL3BvcHVwV2l0aFdhcm5pbmcuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZWxlbWVudCxcclxuICAgIGNhcmRDb25maWcsXHJcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yLFxyXG4gICAgaGFuZGxlT3BlblBvcHVwLFxyXG4gICAgaGFuZGxlQWxlcnRQb3B1cCxcclxuICAgIGVsZW1lbnRMaWtlLFxyXG4gICAgdXNlcklkXHJcbiAgKSB7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjsgLy8g0YHQtdC70LXQutGC0L7RgCDQv9C+0L/QsNC/0LBcclxuICAgIHRoaXMuX2NhcmRDb25maWcgLSBjYXJkQ29uZmlnOyAvLyDRgdCx0L7RgNC60LAg0Y3Qu9C10LzQtdC90YLQvtCyINC/0L7Qv9Cw0L/QsFxyXG5cclxuICAgIHRoaXMuX2hhbmRsZU9wZW5Qb3B1cCA9IGhhbmRsZU9wZW5Qb3B1cDsgLy8g0L7RgtC60YDRi9GC0LjQtSDQsdC+0LvRjNGI0L7QuSDQutCw0YDRgtC40L3QutC4XHJcbiAgICB0aGlzLl9oYW5kbGVBbGVydFBvcHVyID0gaGFuZGxlQWxlcnRQb3B1cDsgLy8g0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0L/RgNC10LTRg9C/0YDQtdC20LTQtdC90LjRj1xyXG5cclxuICAgIHRoaXMuX2xpbmsgPSBlbGVtZW50Lmxpbms7IC8vINGB0YHRi9C70LrQsCDQvdCwINC60LDRgNGC0LjQvdC60YNcclxuICAgIHRoaXMuX3RpdGxlID0gZWxlbWVudC5uYW1lOyAvLyDQuNC80Y8g0LrQsNGA0YLQuNC90LrQuFxyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkOyAvLyDQuNC00LXQvdGC0LjRhNC40LrQsNGC0L7RgCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgIHRoaXMuX2VsZW1lbnRJZCA9IGVsZW1lbnQuX2lkOyAvLyDQuNC00LXQvdGC0LjRhNC40LrQsNGC0L7RgCDRjdC70LXQvNC10L3QtdGC0LBcclxuICAgIHRoaXMuX2xpa2VBcnJheSA9IGVsZW1lbnQubGlrZXM7IC8vINC80LDRgdGB0LjQsiDQu9Cw0LnQutC+0LIg0LrQsNGA0YLQvtGH0LrQuFxyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSBlbGVtZW50Lmxpa2VzLmxlbmd0aDsgLy8g0LrQvtC70LjRh9C10YHRgtCy0L4g0LvQsNC50LrQvtCyINC60LDRgNGC0L7Rh9C60LhcclxuICAgIHRoaXMuX2VsZW1lbnRMaWtlID0gZWxlbWVudExpa2U7IC8vINGN0LvQtdC80LXQvdGCINC70LDQudC60LBcclxuICAgIHRoaXMuX3N0cmFuZ2VySWQgPSBlbGVtZW50LnN0cmFuZ2VySWQ7IC8vINGH0YPQttC+0Lkg0LjQtNC10L3RgtC40YTQuNC60LDRgtC+0YBcclxuICAgIHRoaXMuX293bmVyTGlrZSA9IGZhbHNlOyAvLyDQuNC30L3QsNGH0LDQu9GM0L3QvtC1INC/0L7Qu9C+0LbQtdC90LjQtSDQu9Cw0LnQutCwXHJcblxyXG4gICAgdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVMaWtlKCkge1xyXG4gICAgdGhpcy5fYnRuTGlrZS5jbGFzc0xpc3QudG9nZ2xlKHRoaXMuX2NhcmRDb25maWcuY2FyZExpa2VBY3RpdmVDbGFzcyk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVDbGFzc0xpa2VFbGVtZW50ID0gKGxpa2VJdGVtKSA9PiB7XHJcbiAgICBsaWtlSXRlbS5jbGFzc0xpc3QudG9nZ2xlKHRoaXMuX2NhcmRDb25maWcuY2FyZExpa2VBY3RpdmVDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2NvdW50aW5nT3RoZXJMaWtlcyA9ICgpID0+IHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbGlrZUFycmF5Lmxlbmd0aDsgKSB7XHJcbiAgICAgIGlmICh0aGlzLl9saWtlQXJyYXlbaV0uX2lkID09PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuX293bmVyTGlrZSA9IHRydWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGkrKztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvdW50aW5nUXVhbnRpdHlMaWtlID0gKFF1YW50aXR5TGlrZSkgPT4ge1xyXG4gICAgdGhpcy5fY2FyZENvdW50ZXJTZWxlY3Rvci50ZXh0Q29udGVudCA9IFF1YW50aXR5TGlrZTtcclxuICB9O1xyXG5cclxuICBhbGVydEZvckRlbGV0ZSA9ICgpID0+IHtcclxuICAgIHRoaXMuX2hhbmRsZUFsZXJ0UG9wdXIodGhpcy5fZWxlbWVudElkLCB0aGlzLl9lbGVtZW50KTtcclxuICB9O1xyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRDb25maWcuY2FyZFRlbXBsYXRlKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRDb25maWcuY2FyZFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZSgpIHtcclxuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX3RlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2NhcmRJbWcgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2NhcmRDb25maWcuY2FyZEltZ1NlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9jYXJkQ29uZmlnLmNhcmRUaXRsZVNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnRuTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fY2FyZENvbmZpZy5jYXJkTGlrZVNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnRuRGVsZXRlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9jYXJkQ29uZmlnLmNhcmRCdG5EZWxldGVTZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1nLnNyYyA9IHRoaXMuX2RhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWcuYWx0ID0gdGhpcy5fZGF0YS5uYW1lO1xyXG5cclxuICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fY2FyZENvbmZpZy5jYXJkQ291bnRlclNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX293bmVySWQpIHtcclxuICAgICAgdGhpcy5fYnRuRGVsZXRlLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY291bnRpbmdRdWFudGl0eUxpa2UodGhpcy5fbGlrZUNvdW50ZXIpO1xyXG5cclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgaWYgKHRoaXMuX2NvdW50aW5nT3RoZXJMaWtlcygpKSB7XHJcbiAgICAgIHRoaXMuX2J0bkxpa2UuY2xhc3NMaXN0LmFkZCh0aGlzLl9jYXJkQ29uZmlnLmNhcmRMaWtlQWN0aXZlQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2J0bkxpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuX293bmVyTGlrZSkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRMaWtlKFwiREVMRVRFXCIsIHRoaXMuX2NhcmRJZCwgdGhpcy5fYnRuTGlrZSk7XHJcbiAgICAgICAgdGhpcy5fb3duZXJMaWtlID0gZmFsc2U7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudExpa2UoXCJQVVRcIiwgdGhpcy5fY2FyZElkLCB0aGlzLl9idG5MaWtlKTtcclxuICAgICAgICB0aGlzLl9vd25lckxpa2UgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAodGhpcy5fYnRuRGVsZXRlKSB7XHJcbiAgICAgIHRoaXMuX2J0bkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUFsZXJ0UG9wdXIoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fY2FyZEltZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVPcGVuUG9wdXAodGhpcy5fdGl0bGUsIHRoaXMuX2xpbmspO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy50eXBlRXJyb3IpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLnR5cGVFcnJvcik7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IocmVuZGVyZXIsIHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG5cclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IHNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGFkZE5ld0l0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgdXJsOiBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjBcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImJkZWNkYzc2LTc1YTUtNDBlMi05NGQ2LTM1YWM0ZTdiNWJjY1wiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdFwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCIucG9wdXBfX3N1Ym1pdF9pbmFjdGl2ZVwiLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcIi5wb3B1cF9faW5wdXQtZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwiLnBvcHVwX19pbnB1dC1lcnJvcl92aXNpYmxlXCIsXHJcbiAgICB0eXBlRXJyb3I6IFwiLnBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgfTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkQ29uZmlnID0ge1xyXG4gIGNhcmRUZW1wbGF0ZTogJyNlbGVtZW50LXRlbXBsYXRlJyxcclxuICBjYXJkU2VsZWN0b3I6ICcuZWxlbWVudCcsXHJcbiAgY2FyZEltZ1NlbGVjdG9yOiAnLmVsZW1lbnRfX2ltZycsXHJcbiAgY2FyZFRpdGxlU2VsZWN0b3I6ICcuZWxlbWVudF9fdGl0bGUnLFxyXG4gIGNhcmRMaWtlU2VsZWN0b3I6ICcuZWxlbWVudF9fYnV0dG9uLWxpa2UnLFxyXG4gIGNhcmRMaWtlQWN0aXZlQ2xhc3M6ICdlbGVtZW50X19idXR0b24tbGlrZV9hY3RpdmUnLFxyXG4gIGNhcmRDb3VudGVyU2VsZWN0b3I6ICcuZWxlbWVudF9fbGlrZS1jb3VudGVyJyxcclxuICBjYXJkQnRuRGVsZXRlU2VsZWN0b3I6ICcuZWxlbWVudF9fZGVsLWJ0bicsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdXNlckluZm9Db25maWcgPSB7XHJcbiAgcHJvZmlsZUF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2F2YXRhcicsXHJcbiAgcHJvZmlsZVRpdGxlU2VsZWN0b3I6ICcucHJvZmlsZV9fdGl0bGUnLFxyXG4gIHByb2ZpbGVTdWJ0aXRsZVNlbGVjdG9yOiAnLnByb2ZpbGVfX3N1YnRpdGxlJ1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwU2VsZWN0b3JDb25maWcgPSB7XHJcbiAgcG9wdXBFZGl0QXZhdGFyOiAnLnBvcHVwLWF2YXRhcicsXHJcbiAgcG9wdXBFZGl0OiAnLnBvcHVwLWVkaXQnLFxyXG4gIHBvcHVwQWRkOiAnLnBvcHVwLWFkZCcsXHJcbiAgcG9wdXBCaWdJbWc6ICcucG9wdXBfb3Blbl9iaWctaW1nJyxcclxuICBwb3B1cEFsZXJ0OiAnLnBvcHVwLXdhcm5pbmcnLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0XHJcbnBvcHVwTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cCcpLFxyXG5wb3B1cEVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbJ3BvcHVwLWVkaXRfX2Zvcm0nXSxcclxucG9wdXBBZGRGb3JtID0gZG9jdW1lbnQuZm9ybXNbJ3BvcHVwLWFkZF9fZm9ybSddLFxyXG5wb3B1cEVkaXRBdmF0YXJGb3JtID0gZG9jdW1lbnQuZm9ybXNbJ3BvcHVwLWVkaXQtYXZhdGFyX19mb3JtJ10sXHJcbmJ0bkVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyksXHJcbmJ0bkFkZGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpLFxyXG5idG5FZGl0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnRuX2F2YXRhcicpLFxyXG5pbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3RleHRfdHlwZS11c2VybmFtZScpLFxyXG5pbnB1dEFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90ZXh0X3R5cGUtYWJvdXQnKSxcclxuaW5wdXRDYXJkTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdGV4dF90eXBlLXRpdGxlJyksXHJcbmlucHV0Q2FyZExpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3RleHRfdHlwZS10aXRsZScpLFxyXG5jYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIiksXHJcbmJ0bkZvcm1TdWJtaXQgPSAnLnBvcHVwX19zdWJtaXQnLFxyXG53YWl0YnRudGV4dCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gcG9wdXBTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2Nsb3NlUG9wdXBCeU92ZXJsYXlDbGljayhldnQpIHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2J1dHRvbi1jbG9zZWQnKSlcclxuICAgICB7IHRoaXMuY2xvc2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2Nsb3NlUG9wdXBCeU92ZXJsYXlDbGljayhldnQpO1xyXG4gICAgfSk7XHJcbiAgfX0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBmb3JtU3VibWl0IH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZm9ybVN1Ym1pdCA9IGZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChcclxuICAgICAgKGlucHV0KSA9PiAodGhpcy5faW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSlcclxuICAgICk7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2Zvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG5cclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbmZvID0gYWJvdXQ7XHJcbiAgICB0aGlzX2F2YXRhciA9IGF2YXRhcjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgaW5mbzogdGhpcy5faW5mby50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlcklkO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgICB0aGlzLl9hdmF0YXIuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3VzZXJJZCA9IGlkO1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbmZvLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEltZyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZ1wiKTtcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190aXRsZS1pbWdcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKHRpdGxlLCBsaW5rKSB7XHJcbiAgICAvLyB0aGlzLl9wb3B1cEltZy5zcmMgPSBsaW5rO1xyXG4gICAgLy8gdGhpcy5fcG9wdXBJbWcuYWx0ID0gdGl0bGU7XHJcbiAgICAvLyB0aGlzLl9wb3B1cFRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XHJcblxyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBoYW5kbGVSZXNwb25jZSA9IChyZXMpID0+IHtcclxuICBpZiAocmVzLm9rKSB7XHJcbiAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICB9XHJcbiAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgIHRoaXMuX3VybCA9IGNvbmZpZy51cmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBpbnN0YWxsQXZhdGFyKG5ld0xpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IG5ld0xpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbihoYW5kbGVSZXNwb25jZSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgIH0pLnRoZW4oaGFuZGxlUmVzcG9uY2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbihoYW5kbGVSZXNwb25jZSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oaGFuZGxlUmVzcG9uY2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0UGxhY2VDYXJkKGNhcmRFbGVtZW50KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGNhcmRFbGVtZW50Lm5hbWUsXHJcbiAgICAgICAgbGluazogY2FyZEVsZW1lbnQubGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKGhhbmRsZVJlc3BvbmNlKTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKHJlcXVlc3QsIGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IHJlcXVlc3QsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChlcnIpID0+IHtcclxuICAgICAgcmV0dXJuIGhhbmRsZVJlc3BvbmNlKGVycik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKGVycikgPT4ge1xyXG4gICAgICByZXR1cm4gaGFuZGxlUmVzcG9uY2UoZXJyKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aFdhcm5pbmcgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdCcpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcblxyXG4gIH1cclxuXHJcbiAgb3BlbihjYXJkSWQsIGNhcmRFbGVtbWVudCkge1xyXG4gICAgc3VwZXIub3BlbigpXHJcblxyXG4gICAgdGhpcy5fY2FyZElkID0gY2FyZElkO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1tZW50ID0gY2FyZEVsZW1tZW50O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9jYXJkSWQsIHRoaXMuX2NhcmRFbGVtbWVudClcclxuICAgIH0pXHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdGlvbi5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhXYXJuaW5nIGZyb20gXCIuLi9jb21wb25lbnRzL3BvcHVwV2l0aFdhcm5pbmcuanNcIjtcclxuaW1wb3J0ICogYXMgYWxsIGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYWxsLmNvbmZpZyk7XHJcbmNvbnN0IHBvcHVwT3BlbkJpZ0ltZyA9IG5ldyBQb3B1cFdpdGhJbWFnZShhbGwucG9wdXBTZWxlY3RvckNvbmZpZy5wb3B1cEJpZ0ltZyk7XHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKGFsbC51c2VySW5mb0NvbmZpZyk7XHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldEluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcclxuICAudGhlbigoW3VzZXJEYXRhLCBjYXJkc0FycmF5XSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgcmV0dXJuIGNhcmRzQXJyYXk7XHJcbiAgfSlcclxuICAudGhlbigoY2FyZHNBcnJheSkgPT4ge1xyXG4gICAgY2FyZHNMaXN0LnJlbmRlckNhcmRzKGNhcmRzQXJyYXkpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG5cclxuY29uc3QgcG9wdXBBbGVydCA9IG5ldyBQb3B1cFdpdGhXYXJuaW5nKFxyXG4gIGFsbC5wb3B1cFNlbGVjdG9yQ29uZmlnLmNvbmZpcm1Qb3B1cCxcclxuICAoY2FyZElkLCBjYXJkRWxlbWVudCkgPT4ge1xyXG4gICAgYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBBbGVydC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZWxlbWVudCwgaGFuZGxlT3BlblBvcHVwKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgZWxlbWVudCxcclxuICAgIGFsbC5jYXJkQ29uZmlnLFxyXG4gICAgaGFuZGxlT3BlblBvcHVwLFxyXG4gICAgaGFuZGxlQWxlcnRQb3B1cCxcclxuICAgIChyZXF1ZXN0LCBjYXJkSWQsIGNhcmRMaWtlU2VsZWN0b3IpID0+IHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLmxpa2VDYXJkKHJlcXVlc3QsIGNhcmRJZCwgY2FyZExpa2VTZWxlY3RvcilcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBjYXJkLmNvdW50aW5nUXVhbnRpdHlMaWtlKHJlcy5saWtlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgY2FyZC50b2dnbGVDbGFzc0xpa2VFbGVtZW50KGNhcmRMaWtlU2VsZWN0b3IpO1xyXG4gICAgICAgICAgY2FyZC5oYW5kbGVPcGVuUG9wdXAocG9wdXBCaWdJbWcpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgfSxcclxuICAgIHVzZXJJbmZvLmdldFVzZXJJZCgpXHJcbiAgKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuY3JlYXRlKCk7XHJcbiAgY2FyZHNMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufTtcclxuXHJcbi8vIGNvbnN0IGNyZWF0ZUNhcmQgPSAoZWxlbWVudCwgaGFuZGxlT3BlblBvcHVwKSA9PiB7XHJcbi8vICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4vLyAgICAgZWxlbWVudCxcclxuLy8gICAgIGFsbC5jYXJkQ29uZmlnLFxyXG4vLyAgICAgaGFuZGxlT3BlblBvcHVwLFxyXG4vLyAgICAgaGFuZGxlQWxlcnRQb3B1cCxcclxuLy8gICAgIChyZXF1ZXN0LCBjYXJkSWQsIGNhcmRMaWtlU2VsZWN0b3IpID0+IHtcclxuLy8gICAgICAgYXBpXHJcbi8vICAgICAgICAgLmxpa2VDYXJkKHJlcXVlc3QsIGNhcmRJZCwgY2FyZExpa2VTZWxlY3RvcilcclxuLy8gICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbi8vICAgICAgICAgICBjYXJkLmNvdW50aW5nUXVhbnRpdHlMaWtlKHJlcy5saWtlcy5sZW5ndGgpO1xyXG4vLyAgICAgICAgICAgY2FyZC50b2dnbGVDbGFzc0xpa2VFbGVtZW50KGNhcmRMaWtlU2VsZWN0b3IpO1xyXG4vLyAgICAgICAgICAgY2FyZC5oYW5kbGVPcGVuUG9wdXAocG9wdXBCaWdJbWcpO1xyXG4vLyAgICAgICAgIH0pXHJcbi8vICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuLy8gICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbi8vICAgICAgICAgfSk7XHJcbi8vICAgICB9LFxyXG4vLyAgICAgdXNlckluZm8uZ2V0VXNlcklkKClcclxuLy8gICApO1xyXG4vLyAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5jcmVhdGUoKTtcclxuLy8gICBjYXJkc0xpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbi8vICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4vLyB9O1xyXG5cclxucG9wdXBPcGVuQmlnSW1nLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbigoaXRlbSkgPT4ge1xyXG4gIGNhcmRzTGlzdC5hZGROZXdJdGVtKFxyXG4gICAgY3JlYXRlQ2FyZChpdGVtLCAoKSA9PiB7XHJcbiAgICAgIGhhbmRsZU9wZW5Qb3B1cChpdGVtKTtcclxuICAgIH0pXHJcbiAgKTtcclxufSwgYWxsLmNhcmRzQ29udGFpbmVyKTtcclxuXHJcbmNhcmRzTGlzdC5yZW5kZXJJdGVtcygpO1xyXG5cclxuZnVuY3Rpb24gZG93bmxvYWRCdG5UZXh0KGJ0bkZvcm1TdWJtaXQsIHRleHQpIHtcclxuICBidG5Gb3JtU3VibWl0LnRleHRDb250ZW50ID0gdGV4dDtcclxufVxyXG5cclxuY29uc3QgZm9ybUVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBhbGwucG9wdXBTZWxlY3RvckNvbmZpZy5wb3B1cEUsXHJcbiAgKHVzZXJEYXRhLCBidG5Gb3JtU3VibWl0KSA9PiB7XHJcbiAgICBjb25zdCBidG5Gb3JtVGV4dCA9IGJ0bkZvcm1TdWJtaXQudGV4dENvbnRlbnQ7XHJcbiAgICBkb3dubG9hZEJ0blRleHQoYnRuRm9ybVN1Ym1pdCwgYWxsLndhaXRidG50ZXh0KTtcclxuXHJcbiAgICBhcGlcclxuICAgICAgLnNldEluZm8odXNlckRhdGEpXHJcbiAgICAgIC50aGVuKChuZXdVc2VyRGF0YSkgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKG5ld1VzZXJEYXRhKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKCkgPT4gcG9wdXBBZGQuY2xvc2UoKSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgZG93bmxvYWRCdG5UZXh0KGJ0bkZvcm1TdWJtaXQsIGJ0bkZvcm1UZXh0KTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxuICBhbGwuYnRuRm9ybVN1Ym1pdFxyXG4pO1xyXG5cclxuY29uc3QgcG9wdXBBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBhbGwucG9wdXBTZWxlY3RvckNvbmZpZy5wb3B1cEFkZCxcclxuICAoZWxlbWVudCwgYnRuRm9ybVN1Ym1pdCkgPT4ge1xyXG4gICAgY29uc3QgYnRuRm9ybVRleHQgPSBidG5Gb3JtU3VibWl0LnRleHRDb250ZW50O1xyXG4gICAgZG93bmxvYWRCdG5UZXh0KGJ0bkZvcm1TdWJtaXQsIGFsbC53YWl0YnRudGV4dCk7XHJcblxyXG4gICAgYXBpXHJcbiAgICAgIC5nZXRQbGFjZUNhcmQoZWxlbWVudClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKFxyXG4gICAgICAgICAgY3JlYXRlQ2FyZChyZXMsICgpID0+IHtcclxuICAgICAgICAgICAgaGFuZGxlT3BlblBvcHVwKHJlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBwb3B1cEFkZC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBkb3dubG9hZEJ0blRleHQoYnRuRm9ybVN1Ym1pdCwgYnRuRm9ybVRleHQpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG4gIGFsbC5idG5Gb3JtU3VibWl0XHJcbik7XHJcblxyXG5jb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBhbGwucG9wdXBTZWxlY3RvckNvbmZpZy5wb3B1cEVkaXRBdmF0YXIsXHJcbiAgKG5ld0xpbmssIGJ0bkZvcm1TdWJtaXQpID0+IHtcclxuICAgIGNvbnN0IGJ0bkZvcm1UZXh0ID0gYnRuRm9ybVN1Ym1pdC50ZXh0Q29udGVudDtcclxuICAgIGRvd25sb2FkQnRuVGV4dChidG5Gb3JtU3VibWl0LCBhbGwud2FpdGJ0bnRleHQpO1xyXG5cclxuICAgIGFwaVxyXG4gICAgICAuaW5zdGFsbEF2YXRhcihuZXdMaW5rLmxpbmspXHJcbiAgICAgIC50aGVuKChuZXdVc2VyRGF0YSkgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKG5ld1VzZXJEYXRhKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwRWRpdEF2YXRhci5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBkb3dubG9hZEJ0blRleHQoYnRuRm9ybVN1Ym1pdCwgYnRuRm9ybVRleHQpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG4gIGFsbC5idG5Gb3JtU3VibWl0XHJcbik7XHJcblxyXG5jb25zdCBoYW5kbGVPcGVuUG9wdXAgPSAoZWxlbWVudCkgPT4ge1xyXG4gIHBvcHVwT3BlbkJpZ0ltZy5vcGVuKGVsZW1lbnQudGl0bGUsIGVsZW1lbnQubGluayk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVBbGVydFBvcHVwID0gKGNhcmRJZCwgZWxlbWVudCkgPT4ge1xyXG4gIHBvcHVwQWxlcnQub3BlbihjYXJkSWQsIGVsZW1lbnQpO1xyXG59O1xyXG5cclxuYWxsLmJ0bkVkaXRBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cEVkaXRBdmF0YXIub3BlbigpO1xyXG59KTtcclxuXHJcbmFsbC5idG5FZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCB7IG5hbWUsIGluZm8gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgYWxsLmlucHV0TmFtZS52YWx1ZSA9IG5hbWU7XHJcbiAgYWxsLmlucHV0QWJvdXQudmFsdWUgPSBpbmZvO1xyXG4gIGZvcm1FZGl0VmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxuICBmb3JtRWRpdC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWxsLmJ0bkFkZGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cEFkZC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8g0KHQu9GD0YjQsNGC0LXQu9C4XHJcblxyXG5mb3JtRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEFkZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEFsZXJ0LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwRWRpdEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gVmFsaWRhdGlvblxyXG5cclxuY29uc3QgZm9ybUF2YXRhclZhbGlkYXRpb24gPSBuZXcgZm9ybUFkZFZhbGlkYXRpb24oXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBhbGwucG9wdXBFZGl0QXZhdGFyRm9ybVxyXG4pO1xyXG5mb3JtQXZhdGFyVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBmb3JtRWRpdFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRpb24oXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBhbGwucG9wdXBBZGRGb3JtXHJcbik7XHJcbmZvcm1FZGl0VmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBmb3JtQWRkVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdGlvbihcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIGFsbC5wb3B1cEVkaXRGb3JtXHJcbik7XHJcbmZvcm1BZGRWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJlbGVtZW50IiwiY2FyZENvbmZpZyIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVPcGVuUG9wdXAiLCJoYW5kbGVBbGVydFBvcHVwIiwiZWxlbWVudExpa2UiLCJ1c2VySWQiLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsIl9kZWZpbmVQcm9wZXJ0eSIsImxpa2VJdGVtIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2NhcmRDb25maWciLCJjYXJkTGlrZUFjdGl2ZUNsYXNzIiwiaSIsIl9saWtlQXJyYXkiLCJsZW5ndGgiLCJfaWQiLCJfdXNlcklkIiwiX293bmVyTGlrZSIsIlF1YW50aXR5TGlrZSIsIl9jYXJkQ291bnRlclNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJfaGFuZGxlQWxlcnRQb3B1ciIsIl9lbGVtZW50SWQiLCJfZWxlbWVudCIsInRoaXMiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVPcGVuUG9wdXAiLCJfbGluayIsImxpbmsiLCJfdGl0bGUiLCJuYW1lIiwibGlrZXMiLCJfbGlrZUNvdW50ZXIiLCJfZWxlbWVudExpa2UiLCJfc3RyYW5nZXJJZCIsInN0cmFuZ2VySWQiLCJfZ2V0VGVtcGxhdGUiLCJrZXkiLCJ2YWx1ZSIsIl9idG5MaWtlIiwiX3RlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2FyZFRlbXBsYXRlIiwiY29udGVudCIsImNhcmRTZWxlY3RvciIsIl9jYXJkIiwiY2xvbmVOb2RlIiwiX2NhcmRJbWciLCJjYXJkSW1nU2VsZWN0b3IiLCJfY2FyZFRpdGxlIiwiY2FyZFRpdGxlU2VsZWN0b3IiLCJjYXJkTGlrZVNlbGVjdG9yIiwiX2J0bkRlbGV0ZSIsImNhcmRCdG5EZWxldGVTZWxlY3RvciIsInNyYyIsIl9kYXRhIiwiYWx0IiwiX2NhcmRMaWtlQ291bnRlciIsImNhcmRDb3VudGVyU2VsZWN0b3IiLCJfb3duZXJJZCIsInJlbW92ZSIsImNvdW50aW5nUXVhbnRpdHlMaWtlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfdGhpczIiLCJfY291bnRpbmdPdGhlckxpa2VzIiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jYXJkSWQiLCJGb3JtVmFsaWRhdGlvbiIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsImVycm9yQ2xhc3MiLCJ0eXBlRXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzb21lIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9kaXNhYmxlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiU2VjdGlvbiIsInJlbmRlcmVyIiwic2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIml0ZW1zIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJhcHBlbmQiLCJwcmVwZW5kIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0RXJyb3JDbGFzcyIsInBvcHVwU2VsZWN0b3JDb25maWciLCJwb3B1cEVkaXRBdmF0YXIiLCJwb3B1cEVkaXQiLCJwb3B1cEFkZCIsInBvcHVwQmlnSW1nIiwicG9wdXBBbGVydCIsInBvcHVwRWRpdEZvcm0iLCJmb3JtcyIsInBvcHVwQWRkRm9ybSIsInBvcHVwRWRpdEF2YXRhckZvcm0iLCJidG5FZGl0UHJvZmlsZSIsImJ0bkFkZGZvcm0iLCJidG5FZGl0QXZhdGFyIiwiaW5wdXROYW1lIiwiaW5wdXRBYm91dCIsImNhcmRzQ29udGFpbmVyIiwiYnRuRm9ybVN1Ym1pdCIsIndhaXRidG50ZXh0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX2Nsb3NlUG9wdXBCeU92ZXJsYXlDbGljayIsIlBvcHVwV2l0aEZvcm0iLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJfcmVmIiwiZm9ybVN1Ym1pdCIsImNhbGwiLCJfZm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2lucHV0VmFsdWVzIiwiaW5wdXQiLCJfdGhpczMiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJVc2VySW5mbyIsImFib3V0IiwiYXZhdGFyIiwiX25hbWUiLCJfaW5mbyIsInRoaXNfYXZhdGFyIiwiaW5mbyIsIl9yZWYyIiwiX2F2YXRhciIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1nIiwiX3BvcHVwVGl0bGUiLCJ0aXRsZSIsImhhbmRsZVJlc3BvbmNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsIkFwaSIsIl91cmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJuZXdMaW5rIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRoZW4iLCJfVXJsIiwiY2FyZEVsZW1lbnQiLCJyZXF1ZXN0IiwiY2FyZElkIiwiZXJyIiwiUG9wdXBXaXRoV2FybmluZyIsImhhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0QnRuIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJjYXJkRWxlbW1lbnQiLCJfY2FyZEVsZW1tZW50IiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsInBvcHVwT3BlbkJpZ0ltZyIsImFsbCIsInVzZXJJbmZvIiwicHJvZmlsZUF2YXRhclNlbGVjdG9yIiwicHJvZmlsZVRpdGxlU2VsZWN0b3IiLCJwcm9maWxlU3VidGl0bGVTZWxlY3RvciIsImdldEluZm8iLCJnZXRJbml0aWFsQ2FyZHMiLCJ1c2VyRGF0YSIsImNhcmRzQXJyYXkiLCJzZXRVc2VySW5mbyIsImNhcmRzTGlzdCIsInJlbmRlckNhcmRzIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwiZGVsZXRlQ2FyZCIsImNyZWF0ZUNhcmQiLCJjYXJkIiwibGlrZUNhcmQiLCJ0b2dnbGVDbGFzc0xpa2VFbGVtZW50IiwiZ2V0VXNlcklkIiwiY3JlYXRlIiwiYWRkSXRlbSIsImFkZE5ld0l0ZW0iLCJkb3dubG9hZEJ0blRleHQiLCJ0ZXh0IiwicmVuZGVySXRlbXMiLCJmb3JtRWRpdCIsImJ0bkZvcm1UZXh0Iiwic2V0SW5mbyIsIm5ld1VzZXJEYXRhIiwiZmluYWxseSIsImdldFBsYWNlQ2FyZCIsImluc3RhbGxBdmF0YXIiLCJvcGVuIiwiX3VzZXJJbmZvJGdldFVzZXJJbmZvIiwiZ2V0VXNlckluZm8iLCJmb3JtRWRpdFZhbGlkYXRpb24iLCJyZXNldFZhbGlkYXRpb24iLCJmb3JtQWRkVmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9